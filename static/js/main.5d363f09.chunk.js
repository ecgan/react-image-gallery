(this["webpackJsonpreact-image-gallery"]=this["webpackJsonpreact-image-gallery"]||[]).push([[0],{198:function(e,t,a){e.exports={app:"App_app__13Yue"}},202:function(e,t,a){e.exports={photoCard:"PhotoCard_photoCard__3phY3"}},222:function(e,t,a){e.exports=a(443)},227:function(e,t,a){},260:function(e,t){},262:function(e,t){},443:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),c=a.n(o),l=(a(227),a(452)),i=a(451),u=a(198),s=a.n(u),d=a(448),m=a(450),p=a(65),h=a(30),f=a(206),g=a(155),E=a(199),y=a.n(E),_=a(55),b=a(216),v=function(e,t,a){return{text:e&&e.trim(),min_taken_date:t&&t.startOf("day").unix(),max_taken_date:a&&a.endOf("day").unix()}},k=a(154),w=function(e,t){switch(t.type){case"SET_NEW_QUERY":return{query:Object(_.a)({},t.query,{page:1}),loading:!0,error:null,data:null};case"FETCH_ERROR":return{query:e.query,loading:!1,error:t.error,data:e.data};case"FETCH_SUCCESS":var a=Object(_.a)({},t.data);return e.data&&e.data.photos.photo&&(a.photos.photo=[].concat(Object(k.a)(e.data.photos.photo),Object(k.a)(a.photos.photo))),{query:e.query,loading:!1,error:null,data:a};case"REQUEST_FETCH_MORE":return{query:Object(_.a)({},e.query,{page:e.query.page+1}),loading:!0,error:null,data:e.data};case"REFETCH":return{query:e.query,loading:!0,error:null,data:e.data};default:throw new Error("Unknown action.type ".concat(t.type," in reducer."))}},C=a(200),O=a.n(C),j={flickrApiKey:"".concat("d3fd42c232fa06153be5b09d06a49296")},q=new O.a(j.flickrApiKey),x=function(e){return q.photos.getRecent(e)},R=function(e){return q.photos.search(e)},T=function(e,t,a,n,r,o){var c=e||t||a?R({text:e,min_taken_date:t,max_taken_date:a,page:n,per_page:30}):x({page:n,per_page:30});return c.then(r).catch(o),function(){c&&c.abort()}},S=function(e){var t=Object(n.useMemo)((function(){return v(e.text,e.min_taken_date,e.max_taken_date)}),[e.max_taken_date,e.min_taken_date,e.text]),a=Object(n.useReducer)(w,{query:Object(_.a)({},t,{page:1}),loading:!0,error:null,data:null}),r=Object(b.a)(a,2),o=r[0],c=r[1];Object(n.useEffect)((function(){c({type:"SET_NEW_QUERY",query:t})}),[c,t]),Object(n.useEffect)((function(){if(o.loading){return T(o.query.text,o.query.min_taken_date,o.query.max_taken_date,o.query.page,(function(e){c({type:"FETCH_SUCCESS",data:e.body})}),(function(e){c({type:"FETCH_ERROR",error:e})}))}}),[o.loading,o.query.text,o.query.min_taken_date,o.query.max_taken_date,o.query.page,c]);var l=Object(n.useCallback)((function(){c({type:"REQUEST_FETCH_MORE"})}),[c]),i=Object(n.useCallback)((function(){c({type:"REFETCH"})}),[c]);return Object(_.a)({},o,{fetchMore:l,refetch:i})},F=a(446),Y=a(66),M=a(447),U=a(444),W=function(e){var t=e.photo;return r.a.createElement(U.a,{src:"https://farm".concat(t.farm,".staticflickr.com/").concat(t.server,"/").concat(t.id,"_").concat(t.secret,"_s.jpg"),shape:"square",size:75,alt:t.title,title:t.title})},A=a(202),H=a.n(A),D=function(e){var t=e.photo;return r.a.createElement("a",{href:"https://farm".concat(t.farm,".staticflickr.com/").concat(t.server,"/").concat(t.id,"_").concat(t.secret,"_b.jpg"),target:"_blank",rel:"noopener noreferrer"},r.a.createElement(M.a,{className:H.a.photoCard,hoverable:!0,cover:r.a.createElement(W,{photo:t})}))},I=function(e){var t=e.photos;return r.a.createElement(F.a,{style:{width:257,margin:"auto"},grid:{gutter:16,column:3},dataSource:t,renderItem:function(e){return r.a.createElement(F.a.Item,null,r.a.createElement(D,{photo:e}))}},0===t.length&&r.a.createElement(Y.a,null))},N=function(e){var t=e.query,a=S(t),n=a.loading,o=a.error,c=a.data,l=a.fetchMore,i=a.refetch;return r.a.createElement(y.a,{pageStart:1,loadMore:l,hasMore:!n&&!o&&c&&c.photos.page<c.photos.pages},c&&r.a.createElement(I,{photos:c.photos.photo}),c&&c.photos.photo.length>0&&c.photos.page>=c.photos.pages&&r.a.createElement(m.a,{title:"End of result.",subTitle:"End of result."}),n&&r.a.createElement(p.a,null,r.a.createElement(h.a,{span:24,style:{textAlign:"center"}},r.a.createElement(f.a,null))),o&&r.a.createElement(m.a,{status:"error",title:"Request Failed",subTitle:"Please try again later or contact system admin.",style:{padding:16},extra:[r.a.createElement(g.a,{key:0,type:"primary",onClick:i},"Try again")]}))},B=a(445),P=a(218),Q=a(207),J=a(208),K=a(217),L=a(209),V=a(219),z=a(449),G=a(63),$=a.n(G),X=function(e){function t(e){var a;return Object(Q.a)(this,t),(a=Object(K.a)(this,Object(L.a)(t).call(this,e))).handleChange=function(e){(0,a.props.onChange)(e.trim())},a.handleChange=$()(a.handleChange,300),a}return Object(V.a)(t,e),Object(J.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=(t.value,Object(P.a)(t,["value"]));return r.a.createElement(z.a,Object.assign({},a,{onChange:function(t){e.handleChange(t.target.value)}}))}}]),t}(n.Component),Z=function(e){var t,a,n=e.form,o=n.getFieldDecorator,c=n.getFieldValue;return r.a.createElement(d.a,{layout:"vertical"},r.a.createElement(d.a.Item,{label:"Search"},o("text")(r.a.createElement(X,null))),r.a.createElement(d.a.Item,{label:"Date Taken"},r.a.createElement(p.a,{gutter:16},r.a.createElement(h.a,{xs:12},r.a.createElement(d.a.Item,{style:{marginBottom:0}},o("min_taken_date")(r.a.createElement(B.a,{disabledDate:(a=c("max_taken_date"),function(e){return!(!a||!e)&&e>a}),format:"YYYY-MM-DD",placeholder:"From",style:{width:"100%"}})))),r.a.createElement(h.a,{xs:12},r.a.createElement(d.a.Item,{style:{marginBottom:0}},o("max_taken_date")(r.a.createElement(B.a,{disabledDate:(t=c("min_taken_date"),function(e){return!(!t||!e)&&e<t}),format:"YYYY-MM-DD",placeholder:"To",style:{width:"100%"}})))))))},ee=d.a.create()((function(e){var t=e.form;return r.a.createElement("div",null,r.a.createElement(Z,{form:t}),r.a.createElement(N,{query:t.getFieldsValue()}))})),te=function(){return r.a.createElement("div",{className:s.a.app},r.a.createElement(l.a,null,r.a.createElement(l.a.Header,null,r.a.createElement("h1",null,"React Image Gallery")),r.a.createElement(l.a.Content,null,r.a.createElement(ee,null),r.a.createElement(i.a,null))))},ae=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ne(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(r.a.createElement(te,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/react-image-gallery",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/react-image-gallery","/service-worker.js");ae?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ne(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ne(t,e)}))}}()}},[[222,1,2]]]);
//# sourceMappingURL=main.5d363f09.chunk.js.map
(this["webpackJsonpreact-image-gallery"]=this["webpackJsonpreact-image-gallery"]||[]).push([[0],{198:function(e,t,a){e.exports={app:"App_app__13Yue"}},202:function(e,t,a){e.exports={photoCard:"PhotoCard_photoCard__3phY3"}},222:function(e,t,a){e.exports=a(443)},227:function(e,t,a){},260:function(e,t){},262:function(e,t){},443:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),c=a.n(o),l=(a(227),a(452)),u=a(451),i=a(198),m=a.n(i),s=a(448),d=a(450),p=a(65),h=a(30),E=a(206),f=a(155),g=a(199),_=a.n(g),y=a(55),b=a(216),k=function(e,t,a){return{text:e&&e.trim(),min_taken_date:t&&t.startOf("day").unix(),max_taken_date:a&&a.endOf("day").unix()}},v=a(154),C=function(e,t){switch(t.type){case"SET_NEW_QUERY":return{query:Object(y.a)({},t.query,{page:1}),loading:!0,error:null,data:null};case"FETCH_ERROR":return{query:e.query,loading:!1,error:t.error,data:e.data};case"FETCH_SUCCESS":var a=Object(y.a)({},t.data);return e.data&&e.data.photos.photo&&(a.photos.photo=[].concat(Object(v.a)(e.data.photos.photo),Object(v.a)(a.photos.photo))),{query:e.query,loading:!1,error:null,data:a};case"REQUEST_FETCH_MORE":return{query:Object(y.a)({},e.query,{page:e.query.page+1}),loading:!0,error:null,data:e.data};case"REFETCH":return{query:e.query,loading:!0,error:null,data:e.data};default:throw new Error("Unknown action.type ".concat(t.type," in reducer."))}},O=a(200),q=a.n(O),x={flickrApiKey:"".concat("d3fd42c232fa06153be5b09d06a49296")},j=new q.a(x.flickrApiKey),R=function(e){return j.photos.getRecent(e)},T=function(e){return j.photos.search(e)},w=function(e,t,a,n,r,o){var c=e||t||a?T({text:e,min_taken_date:t,max_taken_date:a,page:n,per_page:30}):R({page:n,per_page:30});return c.then(r).catch(o),function(){c&&c.abort()}},F=function(e){var t=Object(n.useMemo)((function(){return k(e.text,e.min_taken_date,e.max_taken_date)}),[e.max_taken_date,e.min_taken_date,e.text]),a=Object(n.useReducer)(C,{query:Object(y.a)({},t,{page:1}),loading:!0,error:null,data:null}),r=Object(b.a)(a,2),o=r[0],c=r[1];Object(n.useEffect)((function(){c({type:"SET_NEW_QUERY",query:t})}),[c,t]),Object(n.useEffect)((function(){if(o.loading){return w(o.query.text,o.query.min_taken_date,o.query.max_taken_date,o.query.page,(function(e){c({type:"FETCH_SUCCESS",data:e.body})}),(function(e){c({type:"FETCH_ERROR",error:e})}))}}),[o.loading,o.query.text,o.query.min_taken_date,o.query.max_taken_date,o.query.page,c]);var l=Object(n.useCallback)((function(){c({type:"REQUEST_FETCH_MORE"})}),[c]),u=Object(n.useCallback)((function(){c({type:"REFETCH"})}),[c]);return Object(y.a)({},o,{fetchMore:l,refetch:u})},S=a(446),Y=a(66),M=a(447),H=a(444),D=function(e){var t=e.photo;return r.a.createElement(H.a,{src:"https://farm".concat(t.farm,".staticflickr.com/").concat(t.server,"/").concat(t.id,"_").concat(t.secret,"_s.jpg"),shape:"square",size:75,alt:t.title,title:t.title})},I=a(202),U=a.n(I),A=function(e){var t=e.photo;return r.a.createElement("a",{href:"https://farm".concat(t.farm,".staticflickr.com/").concat(t.server,"/").concat(t.id,"_").concat(t.secret,"_b.jpg"),target:"_blank",rel:"noopener noreferrer"},r.a.createElement(M.a,{className:U.a.photoCard,hoverable:!0,cover:r.a.createElement(D,{photo:t})}))},B=function(e){var t=e.photos;return r.a.createElement(S.a,{style:{width:257,margin:"auto"},grid:{gutter:16,column:3},dataSource:t,renderItem:function(e){return r.a.createElement(S.a.Item,null,r.a.createElement(A,{photo:e}))}},0===t.length&&r.a.createElement(Y.a,null))},N=function(e){var t=e.query,a=F(t),n=a.loading,o=a.error,c=a.data,l=a.fetchMore,u=a.refetch;return r.a.createElement(_.a,{pageStart:1,loadMore:l,hasMore:!n&&!o&&c&&c.photos.page<c.photos.pages},c&&r.a.createElement(B,{photos:c.photos.photo}),c&&c.photos.photo.length>0&&c.photos.page>=c.photos.pages&&r.a.createElement(d.a,{title:"End of result.",subTitle:"End of result."}),n&&r.a.createElement(p.a,null,r.a.createElement(h.a,{span:24,style:{textAlign:"center"}},r.a.createElement(E.a,null))),o&&r.a.createElement(d.a,{status:"error",title:"Request Failed",subTitle:"Please try again later or contact system admin.",style:{padding:16},extra:[r.a.createElement(f.a,{key:0,type:"primary",onClick:u},"Try again")]}))},Q=a(445),W=a(218),J=a(207),K=a(208),P=a(217),V=a(209),z=a(219),G=a(449),$=a(63),L=a.n($),X=function(e){function t(e){var a;return Object(J.a)(this,t),(a=Object(P.a)(this,Object(V.a)(t).call(this,e))).handleChange=function(e){(0,a.props.onChange)(e.trim())},a.handleChange=L()(a.handleChange,300),a}return Object(z.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=(t.value,Object(W.a)(t,["value"]));return r.a.createElement(G.a,Object.assign({},a,{onChange:function(t){e.handleChange(t.target.value)}}))}}]),t}(n.Component),Z=function(e){var t,a,n=e.form,o=n.getFieldDecorator,c=n.getFieldValue;return r.a.createElement(s.a,{layout:"vertical"},r.a.createElement(s.a.Item,{label:"Search"},o("text")(r.a.createElement(X,null))),r.a.createElement(s.a.Item,{label:"Date Taken"},r.a.createElement(p.a,{gutter:16},r.a.createElement(h.a,{xs:12},r.a.createElement(s.a.Item,{style:{marginBottom:0}},o("min_taken_date")(r.a.createElement(Q.a,{disabledDate:(a=c("max_taken_date"),function(e){return!(!a||!e)&&e>a}),format:"YYYY-MM-DD",placeholder:"From",style:{width:"100%"}})))),r.a.createElement(h.a,{xs:12},r.a.createElement(s.a.Item,{style:{marginBottom:0}},o("max_taken_date")(r.a.createElement(Q.a,{disabledDate:(t=c("min_taken_date"),function(e){return!(!t||!e)&&e<t}),format:"YYYY-MM-DD",placeholder:"To",style:{width:"100%"}})))))))},ee=s.a.create()((function(e){var t=e.form;return r.a.createElement("div",null,r.a.createElement(Z,{form:t}),r.a.createElement(N,{query:t.getFieldsValue()}))})),te=function(){return r.a.createElement("div",{className:m.a.app},r.a.createElement(l.a,null,r.a.createElement(l.a.Header,null,r.a.createElement("h1",null,"React Image Gallery")),r.a.createElement(l.a.Content,null,r.a.createElement(ee,null),r.a.createElement(u.a,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[222,1,2]]]);
//# sourceMappingURL=main.a1238b05.chunk.js.map